<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atti Tutor - Working Version</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        .app {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        h1 { font-size: 3rem; color: #1f2937; margin-bottom: 1rem; font-weight: 300; text-align: center; }
        .subtitle { color: #6b7280; font-size: 1.2rem; margin-bottom: 2rem; text-align: center; }
        .success { background: #dcfce7; color: #16a34a; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0; text-align: center; }
        .form { background: #f9fafb; padding: 2rem; border-radius: 0.5rem; margin: 2rem 0; }
        input, textarea, button { width: 100%; padding: 0.75rem; margin: 0.5rem 0; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; }
        button { background: #3b82f6; color: white; border: none; cursor: pointer; font-weight: 500; }
        button:hover { background: #2563eb; }
        button:disabled { background: #9ca3af; cursor: not-allowed; }
        .friends { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .friend { background: #eff6ff; padding: 1rem; border-radius: 0.5rem; border: 1px solid #bfdbfe; position: relative; }
        .remove-btn { position: absolute; top: 0.5rem; right: 0.5rem; background: #ef4444; color: white; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-size: 0.8rem; }
        .story { background: #f0f9ff; padding: 2rem; border-radius: 0.5rem; border: 1px solid #0ea5e9; margin-top: 2rem; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        function AttiTutor() {
            const [topic, setTopic] = useState('');
            const [friends, setFriends] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [newFriend, setNewFriend] = useState({ name: '', memory: '' });
            const [story, setStory] = useState('');

            const addFriend = (e) => {
                e.preventDefault();
                if (newFriend.name.trim()) {
                    setFriends([...friends, { 
                        id: Date.now(), 
                        name: newFriend.name.trim(), 
                        memory: newFriend.memory.trim() 
                    }]);
                    setNewFriend({ name: '', memory: '' });
                    setShowForm(false);
                }
            };

            const removeFriend = (id) => {
                setFriends(friends.filter(friend => friend.id !== id));
            };

            const generateStory = () => {
                if (!topic.trim() || friends.length === 0) return;

                const friend1 = friends[0];
                const friend2 = friends[1] || friends[0];
                
                const generatedStory = `
                    <h3>${friend1.name}'s Guide to ${topic}</h3>
                    <p>Last week, I was hanging out with ${friend1.name}${friend1.memory ? ` (who, as you know, ${friend1.memory})` : ''} when the topic of ${topic} came up. What happened next was actually a perfect real-life demonstration of how this concept works.</p>
                    
                    <p><strong>The Setup:</strong><br>
                    We were at ${friend1.name}'s place, and ${friend1.memory ? `given their personality, they naturally` : 'they'} started approaching ${topic} in their typical way. ${friends.length > 1 ? `${friend2.name} was there too, and they immediately had a completely different perspective.` : ''}</p>
                    
                    <p><strong>The Learning Journey:</strong><br>
                    What struck me was how ${friend1.name} naturally broke down ${topic} into manageable pieces - just like they handle everything in life. ${friend1.memory ? `You know how they ${friend1.memory}? Well, they applied that same approach here.` : 'Their methodical nature really showed.'}</p>
                    
                    <p><strong>The Breakthrough:</strong><br>
                    By the end of our conversation, ${topic} made perfect sense because we'd essentially lived through a real example of it. Every time I encounter ${topic} now, I think about that afternoon and how ${friend1.name}'s natural approach demonstrated the core principles.</p>
                    
                    <p><em>This is exactly how ${topic} works in real life - different people approach it from different angles, and when you combine those perspectives, you get a complete understanding that actually sticks!</em></p>
                `;
                
                setStory(generatedStory);
            };

            return (
                <div className="app">
                    <h1>ðŸŽ“ Atti Tutor</h1>
                    <p className="subtitle">Learn anything through stories about your friends</p>
                    
                    <div className="success">
                        âœ… React app is now working! This is a CDN-based version that bypasses build issues.
                    </div>
                    
                    <div className="form">
                        <h3>What would you like to learn?</h3>
                        <input
                            type="text"
                            value={topic}
                            onChange={(e) => setTopic(e.target.value)}
                            placeholder="Enter any topic (e.g., photosynthesis, calculus, machine learning...)"
                        />
                    </div>
                    
                    <div className="form">
                        <h3>Your Friends ({friends.length})</h3>
                        
                        {friends.length === 0 ? (
                            <p style={{color: '#6b7280', textAlign: 'center', padding: '2rem'}}>
                                Add friends to create personalized learning stories!
                            </p>
                        ) : (
                            <div className="friends">
                                {friends.map((friend) => (
                                    <div key={friend.id} className="friend">
                                        <button 
                                            className="remove-btn" 
                                            onClick={() => removeFriend(friend.id)}
                                            title="Remove friend"
                                        >
                                            Ã—
                                        </button>
                                        <strong>{friend.name}</strong>
                                        {friend.memory && (
                                            <div style={{marginTop: '0.5rem', fontStyle: 'italic', color: '#6b7280'}}>
                                                "{friend.memory}"
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {!showForm ? (
                            <button onClick={() => setShowForm(true)} style={{background: '#10b981'}}>
                                + Add Friend
                            </button>
                        ) : (
                            <form onSubmit={addFriend}>
                                <input
                                    type="text"
                                    value={newFriend.name}
                                    onChange={(e) => setNewFriend({...newFriend, name: e.target.value})}
                                    placeholder="Friend's name"
                                    required
                                />
                                <textarea
                                    value={newFriend.memory}
                                    onChange={(e) => setNewFriend({...newFriend, memory: e.target.value})}
                                    placeholder="Share a memory or personality trait about this friend..."
                                    rows="3"
                                />
                                <div style={{display: 'flex', gap: '0.5rem'}}>
                                    <button type="submit" style={{background: '#10b981'}}>Add</button>
                                    <button 
                                        type="button" 
                                        onClick={() => {setShowForm(false); setNewFriend({name: '', memory: ''});}}
                                        style={{background: '#6b7280'}}
                                    >
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        )}
                    </div>
                    
                    <button
                        onClick={generateStory}
                        disabled={!topic.trim() || friends.length === 0}
                        style={{
                            background: (!topic.trim() || friends.length === 0) ? '#9ca3af' : '#059669',
                            fontSize: '1.1rem',
                            padding: '1rem'
                        }}
                    >
                        Create My Learning Story! ðŸ“š
                    </button>
                    
                    {story && (
                        <div className="story" dangerouslySetInnerHTML={{__html: story}} />
                    )}
                    
                    <div style={{marginTop: '2rem', paddingTop: '2rem', borderTop: '1px solid #e5e7eb', textAlign: 'center', fontSize: '0.9rem', color: '#6b7280'}}>
                        ðŸ”§ CDN-based React version | <a href="./debug.html" style={{color: '#3b82f6'}}>Debug Page</a>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(AttiTutor));

        console.log('CDN-based Atti Tutor loaded successfully!');
    </script>
</body>
</html>
